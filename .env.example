# =============================================================================
# ModelMuxer Environment Configuration Template
# =============================================================================
# Copy this file to .env and update with your actual values
# Never commit .env files with real credentials to version control

# =============================================================================
# LLM Provider API Keys (Required - at least one provider)
# =============================================================================
OPENAI_API_KEY=sk-your-openai-key-here
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here
MISTRAL_API_KEY=your-mistral-key-here
GOOGLE_API_KEY=your-google-api-key-here
GROQ_API_KEY=gsk_your-groq-key-here
TOGETHER_API_KEY=your-together-api-key-here
COHERE_API_KEY=your-cohere-api-key-here

# =============================================================================
# ModelMuxer Mode Configuration
# =============================================================================
# Modes: basic (minimal features), enhanced (full features), production (optimized)
MODELMUXER_MODE=basic

# =============================================================================
# Server Configuration
# =============================================================================
HOST=0.0.0.0
PORT=8000
DEBUG=false
WORKERS=4
ENVIRONMENT=development

# =============================================================================
# Database Configuration
# =============================================================================
# SQLite (Development) - Default
DATABASE_URL=sqlite:///./modelmuxer.db

# PostgreSQL (Production) - Uncomment and configure for production
# DATABASE_URL=postgresql://user:password@localhost:5432/modelmuxer
# DATABASE_POOL_SIZE=20
# DATABASE_MAX_OVERFLOW=30

# =============================================================================
# Authentication & Security
# =============================================================================
# JWT Configuration
JWT_SECRET_KEY=CHANGE-THIS-TO-SECURE-32-CHAR-SECRET-IN-PRODUCTION
JWT_ALGORITHM=HS256
JWT_EXPIRY=3600

# API Key Authentication
API_KEYS=sk-test-key-1,sk-test-key-2
AUTH_ENABLED=true
REQUIRE_HTTPS=false

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_METHODS=["GET","POST","PUT","DELETE"]
CORS_HEADERS=*

# =============================================================================
# Caching Configuration
# =============================================================================
CACHE_ENABLED=true
CACHE_BACKEND=memory
CACHE_DEFAULT_TTL=3600
CACHE_MAX_SIZE=1000

# Redis Configuration (Enhanced mode)
# REDIS_URL=redis://localhost:6379/0
# REDIS_PASSWORD=
# REDIS_SSL=false

# =============================================================================
# Routing Configuration
# =============================================================================
DEFAULT_ROUTING_STRATEGY=heuristic
CASCADE_ROUTING_ENABLED=true
SEMANTIC_ROUTING_ENABLED=false
HEURISTIC_ROUTING_ENABLED=true

# Routing Thresholds
CODE_DETECTION_THRESHOLD=0.2
COMPLEXITY_THRESHOLD=0.2
SIMPLE_QUERY_THRESHOLD=0.3
SIMPLE_QUERY_MAX_LENGTH=100

# Semantic Routing (Enhanced mode - requires ML dependencies)
CLASSIFICATION_ENABLED=false
CLASSIFICATION_MODEL=all-MiniLM-L6-v2
SIMILARITY_THRESHOLD=0.7
CACHE_EMBEDDINGS=true

# Intent Classifier (Phase 1: Routing Mind)
ROUTER_INTENT_CLASSIFIER_ENABLED=true
INTENT_LOW_CONFIDENCE=0.4
INTENT_MIN_CONF_FOR_DIRECT=0.7

# =============================================================================
# Cost Management & Budget Configuration
# =============================================================================
DEFAULT_DAILY_BUDGET=10.0
DEFAULT_MONTHLY_BUDGET=100.0
COST_TRACKING_ENABLED=true
BUDGET_ALERTS_ENABLED=true

# Budget Gate (Pre-request cost estimation and enforcement)
# Maximum estimated USD cost per request before budget exceeded error
# Typical values: 0.05 (conservative), 0.08 (balanced), 0.15 (permissive)
MAX_ESTIMATED_USD_PER_REQUEST=0.08

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_REQUESTS_PER_DAY=10000

# =============================================================================
# Monitoring & Observability
# =============================================================================
MONITORING_ENABLED=true
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
HEALTH_CHECK_ENABLED=true

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_CORRELATION_ID=true
ENABLE_REQUEST_LOGGING=true

# OpenTelemetry (Optional)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# =============================================================================
# Model Configuration
# =============================================================================
DEFAULT_MODEL=gpt-4o-mini
MAX_TOKENS_DEFAULT=1000
TEMPERATURE_DEFAULT=0.7

# =============================================================================
# Security Configuration
# =============================================================================
# SSL/TLS Configuration
SSL_VERIFY=true
TLS_MIN_VERSION=1.2
HTTP_VERIFY_SSL=true

# Content Security
ENABLE_CSRF_PROTECTION=true
ENABLE_XSS_PROTECTION=true

# PII Protection (Enhanced mode)
PII_PROTECTION_ENABLED=false
FEATURES_REDACT_PII=false

# Policy Configuration
POLICY_ENABLE_JAILBREAK_DETECTION=false
# POLICY_MODEL_ALLOW='{"tenant_a":["gpt-4o","claude-3-opus"]}'
# POLICY_REGION_ALLOW='{"tenant_a":["eu","us"]}'

# =============================================================================
# Advanced Configuration (Enhanced Mode)
# =============================================================================
# Multi-tenancy
MULTI_TENANCY_ENABLED=false
DEFAULT_ORGANIZATION_ID=default

# Audit Logging
AUDIT_LOGGING_ENABLED=false

# =============================================================================
# Cost Estimation & Pricing Configuration
# =============================================================================
# Price Table (Source of truth for model pricing)
# Path to JSON file containing model pricing data in format:
# {"provider:model": {"input_per_1k_usd": x, "output_per_1k_usd": y}}
PRICE_TABLE_PATH=./scripts/data/prices.json

# Latency Priors (Time window for latency measurements in seconds)
# Default: 1800s (30 minutes) - measurements older than this are discarded
LATENCY_PRIORS_WINDOW_S=1800

# Token Estimation Defaults (Used when tokens not provided in request)
# Default input tokens for cost estimation
ESTIMATOR_DEFAULT_TOKENS_IN=400
# Default output tokens for cost estimation
ESTIMATOR_DEFAULT_TOKENS_OUT=300

# =============================================================================
# Development & Testing
# =============================================================================
# Test Mode (disables external API calls in tests)
TEST_MODE=false